# ZotWatch Configuration

zotero:
  mode: "api"
  api:
    user_id: "${ZOTERO_USER_ID}"
    api_key: "${ZOTERO_API_KEY}"
    page_size: 100
    polite_delay_ms: 200

sources:
  arxiv:
    enabled: true
    categories:
      - "cs.LG"   # Machine Learning
      - "cs.CV"   # Computer Vision and Pattern Recognition
      - "cs.AI"   # Artificial Intelligence
      - "stat.ML" # Machine Learning (Statistics)
    days_back: 2
    max_results: 3000
  crossref:
    enabled: true
    mailto: "${CROSSREF_MAILTO}"
    days_back: 1
    max_results: 3000
  # Abstract scraper for enriching missing abstracts (Camoufox + rule-based + LLM fallback)
  scraper:
    enabled: true
    rate_limit_delay: 1.0  # Seconds between requests
    timeout: 60000  # Page load timeout (ms)
    max_retries: 2  # Retry attempts per URL
    max_html_chars: 15000  # Max HTML chars to send to LLM
    llm_max_tokens: 1024  # Max tokens for LLM extraction response
    llm_temperature: 0.1  # Low temperature for accurate extraction
    use_llm_fallback: true  # Use LLM when rule extraction fails

scoring:
  thresholds:
    must_read: 0.75
    consider: 0.55

  # User research interests for featured recommendations (optional)
  interests:
    enabled: true
    description: |
      æˆ‘ç°åœ¨é‡ç‚¹å…³æ³¨ä¸‹é¢çš„ç ”ç©¶æ–¹å‘ï¼š
      1) SAR å›¾åƒç›®æ ‡è¯†åˆ«ã€æ£€æµ‹ã€è·Ÿè¸ªï¼Œå°¤å…¶é’ˆå¯¹èˆ°èˆ¹ç›®æ ‡
      2) å¤šæºä¼ æ„Ÿå™¨èåˆï¼Œå°¤å…¶æ˜¯ SAR ä¸çº¢å¤–çš„èåˆ
      3) è§†è§‰åŸºç¡€æ¨¡å‹é¢„è®­ç»ƒï¼ˆä¾‹å¦‚ï¼šCLIPã€MAEã€DINOã€JEPA ç­‰ç›¸å…³æ–¹æ³•ï¼‰
      4) å¤§è¯­è¨€æ¨¡å‹çš„æœ€æ–°è¿›å±•
      5) å¸Œæœ›æ’é™¤ç”Ÿç‰©åŒ»å­¦é¢†åŸŸçš„ç ”ç©¶
    top_k_recall: -1  # FAISS recall count, -1 to skip FAISS and use all candidates
    top_k_featured: 5  # Final featured papers count

  # Voyage Rerank settings (uses VOYAGE_API_KEY)
  rerank:
    enabled: true
    model: "rerank-2.5"

embedding:
  provider: "voyage"
  model: "voyage-3.5"
  api_key: "${VOYAGE_API_KEY}"
  input_type: "document"
  batch_size: 128

# LLM Configuration for AI summaries
# Supported providers: "openrouter", "kimi"
llm:
  enabled: true
  provider: "kimi"
  api_key: "${MOONSHOT_API_KEY}"
  model: "kimi-k2-turbo-preview"
  max_tokens: 5120
  temperature: 0.3
  retry:
    max_attempts: 3
    backoff_factor: 2.0
    initial_delay: 1.0
  summarize:
    top_n: 20
    cache_expiry_days: 30

# Example Kimi configuration (uncomment to use):
# llm:
#   enabled: true
#   provider: "kimi"
#   api_key: "${MOONSHOT_API_KEY}"
#   model: "kimi-k2-thinking-turbo"  # or "kimi-k2-turbo-preview"
#   max_tokens: 16000  # Thinking models need >=16000
#   temperature: 1.0   # Thinking models recommend 1.0, normal models 0.6

# Output Configuration
output:
  rss:
    title: "ZotWatch Feed"
    link: "https://ehehe.cn/zotwatch/"
    description: "AI-assisted literature watch"
  html:
    template: "report.html"
    include_summaries: true

# Profile Analysis Configuration
profile:
  # Keywords/tags to exclude from statistics (e.g., personal markers)
  exclude_keywords:
    - "â³"
    - "âœ”ï¸"
    - "ğŸ’"
    - "/done"
    - "/reading"
    - "/unread"
  # Minimum author appearance threshold for "frequent author" count
  author_min_count: 10
